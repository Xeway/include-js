for(const e of document.querySelectorAll("include"))fetch(e.attributes.src.value).then((e=>e.body)).then((e=>{const t=e.getReader();return new ReadableStream({start(e){!function r(){t.read().then((({done:t,value:o})=>{t?e.close():(e.enqueue(o),r())}))}()}})})).then((e=>new Response(e,{headers:{"Content-Type":"text/html"}}).text())).then((t=>{for(const r of Array.from(e.attributes)){if("src"===r.localName)continue;const o=new RegExp(`\\[%\\s*${r.localName}\\s*%\\]`,"g");t=t.replace(o,e.getAttribute(r.localName))}const r=(new DOMParser).parseFromString(t,"text/html");for(const t of Array.from(r.body.childNodes))e.parentNode.insertBefore(t,e);e.remove()})).catch((e=>console.error(e)));